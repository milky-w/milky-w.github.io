---
title: 「WC 2007」剪刀石头布
date: 2018-05-28 17:01:12
categories:
- 网络流
tags:
- 费用流
mathjax: true
---


> 题目大意：给定一个完全图，一些边没有指定方向，求一个指定方向的方案使完全图中三元环的数量最多。$N<=100$

省选前做过，当时只是看了看，知道了怎么做，并没有做笔记，于是我现在全忘了。。

第一步，将未进行的所有比赛建成结点，点 $(i,j)$ 表示 $i$ 与 $j$ 之间还有一场比赛，每个 $(i,j)$ 向点 $i$ 与点 $j$ 连边表示 $i$ 赢或 $j$ 赢，这样每种最大流都是一种方案，再考虑怎样用费用来限制。

在三个点中，若一个点的出度为 $2$，则无法构成三元环。若一个点 $i$ 赢了 $w_i$ 次，则它所贡献的非三元环的个数为 $w_i*(w_i-1)/2$。点 $i$ 每赢一场比赛，对非三元环个数的贡献为 $w_i*(w_i-1)/2-(w_i-1)*(w_i-2)/2=w_i-1$。因此，每个点 $i$ 向 $T$ 连很多容量为 $1$ 的边，费用依次为初始时的赢数 $+0,+1,+2,/cdots$，因为是最小费用流，所以一定是先走 $+0$ 的边，又因为 $N<=100$，所以每个点最多连 $99$ 条边。

所以这道题就做完了。
