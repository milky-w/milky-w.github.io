---
title: 「CF280C」Game on Tree
date: 2018-06-16 20:50:09
categories:
- 概率论
tags:
- 概率和期望
mathjax: true
---

> 题目大意：给出一棵含 $n$ 个白点的有根树，每次随机选择一个还没有被染黑的节点，将这个节点和这个节点子树中的所有点染黑，问期望操作多少次后所有点都被染黑。$n≤100000$

对于一个点 $x$，有 $E(x)=1/dep[x]$。

考虑每一个点花费的步数，要想让根节点被染黑，必须花费一步。对于任意一个节点，选到它或它祖先都可以使它变黑，而选到祖先的情况是不花费步数的，只有选到自己才会花费，概率是 $1/dep[x]$，步数是 $1$，所以期望步数就是 $E(x)=1/dep[x]*1=1/dep[x]$。

因此答案为 $\sum_{i=1}^n \frac{1}{dep[x]}$。
