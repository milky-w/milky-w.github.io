---
title: 「HAOI 2011」problem a
date: 2018-05-29 16:32:06
categories:
- 动态规划
tags:
- 堆优化DP
mathjax: true
---

> 题目大意：一次考试共有 $n$ 个人参加，第 $i$ 个人说：“有 $a_i$ 个人分数比我高，$b_i$ 个人分数比我低。”问最少有几个人没有说真话(可能有相同的分数)。$1≤n≤100000，0≤a_i,b_i≤n$

考虑将每个人可能的名次区间表示成一条线段，即 $[a_i+1,n-b_i]$，则要满足不存在线段交叠（a_1<b_1<a_2<b_2）或线段包含（a_1<b_1<a_2<=b_2或a_1<=b_1<a_2<b_2），也就是两条线段必须要么完全分离，要么完全重叠，并且完全重叠的线段个数不能大于线段的长度。

一开始我是这样想的：把完全重叠的情况先计入答案，这样就将问题转化成了选取最多的不重叠线段。把包含其他线段的线段去掉，这一步可以用差分来处理。然后将所有线段按照左端点从小到大排序，从前往后贪心选就好了。。

刚想说这不是sb题么，然后就发现是我sb了。。

因为有完全重叠的情况，如果有非常多条长线段完全重叠，里面包含了一条短线段，显然选取短线段并不是最优的。。

考虑用DP做，还是将线段按照左端点排序，$f[i]$ 表示恰好到 $i$ 这个位置时，最多符合条件的线段个数。从左往右枚举线段，用线段左端点前面的最大值来更新右端点处的值，转移方程：

$$f[r]=max{f[i]}(1<=i<l)+num[i]$$

其中 $num[i]$ 为与线段 $i$ 完全重叠的线段个数（包括线段 $i$）。

所以这就是一道堆优化DP，结束了。
