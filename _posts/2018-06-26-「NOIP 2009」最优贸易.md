---
title: 「NOIP 2009」最优贸易
date: 2018-06-26 11:09:51
categories:
- 最短路
- 动态规划
tags:
- Tarjan
- 拓扑排序
mathjax: true
---

> 题目大意：给定一个有向图，从 $1$ 走到 $n$，可以重复走，每一个点都有一个物价，求出先从一个点买入物品再到另一个点卖出物品的最大获利。$1≤n≤100000，1≤m≤500000$

这道题有两种做法，第一种是最短路，是高大哥教我的；

第二种是缩点 + 拓扑排序 + DP，是学弟教我的。

第一种做法，一开始我还往分层图上面想，应该也能做吧，但我想复杂了。$f[i]$ 表示节点 $i$ 之前的最小买入价，$g[i]$ 表示节点 $i$ 之后的最大卖出价，求法是正反向各跑一遍最短路，$ans=max \lbrace g[i]-f[i] \rbrace ,1≤i≤n$。

---

我被学弟吊打了！！！

![](https://ss1.bdstatic.com/70cFvXSh_Q1YnxGkpoWK1HF6hhy/it/u=2090625165,1972254292&fm=27&gp=0.jpg)
